@model weight_wise_Invoice.Models.WeightInvoice
@{
    ViewBag.Title = "Weight-wise Invoice";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewBag.Title</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #e3edf7;
            font-family: 'Poppins', sans-serif;
        }
        .invoice-container {
            max-width: 650px;
            margin: 50px auto;
            padding: 40px;
            background: #f9fbfd;
            border-radius: 12px;
            box-shadow: 10px 10px 30px rgba(0, 0, 0, 0.1), 
                        -10px -10px 30px rgba(255, 255, 255, 0.6);
        }
        .form-label {
            font-weight: 600;
            color: #333;
        }
        .form-control {
            background: #f5f7fa;
            border: none;
            border-radius: 8px;
            padding: 12px;
            box-shadow: inset 5px 5px 10px rgba(0, 0, 0, 0.05), 
                        inset -5px -5px 10px rgba(255, 255, 255, 0.6);
        }
        .form-control:focus {
            background: #fff;
            box-shadow: inset 3px 3px 10px rgba(0, 0, 0, 0.08), 
                        inset -3px -3px 10px rgba(255, 255, 255, 0.8);
            outline: none;
        }
        .btn-primary {
            background: linear-gradient(135deg, #4a90e2, #007bff);
            border: none;
            border-radius: 8px;
            font-weight: bold;
            padding: 12px;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #007bff, #0056b3);
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2), 
                        -5px -5px 15px rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>

<div class="container">
    <div class="invoice-container">
        <h2 class="text-center text-primary mb-4">Generate Weight-wise Invoice</h2>

        @if (!string.IsNullOrEmpty(ViewBag.Error))
        {
            <div class="alert alert-danger">@ViewBag.Error</div>
        }

        <form id="invoiceForm" method="post" action="@Url.Action("GenerateInvoice", "WeightWise")">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Customer Name</label>
                    <input type="text" name="CustomerName" class="form-control" required />
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" name="Email" class="form-control" required />
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Date</label>
                    <input type="date" name="Date" class="form-control" required />
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Select Weight</label>
                    <select id="weightSelect" name="Weight" class="form-select" required>
                        <option value="">Select Weight</option>
                        <option value="50 KG">50 KG</option>
                        <option value="100 KG">100 KG</option>
                        <option value="150 KG">150 KG</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Quantity</label>
                    <input type="number" id="quantity" name="Quantity" class="form-control" value="1" min="1" required />
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Price (Per Weight)</label>
                    <input type="text" id="price" name="Price" class="form-control" readonly />
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Total Amount</label>
                <input type="text" id="totalAmount" name="TotalAmount" class="form-control" readonly />
            </div>

            <button type="submit" class="btn btn-primary w-100">Generate Invoice</button>
        </form>
    </div>
</div>

<!-- Bootstrap 5 JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $("#weightSelect").change(function () {
            var selectedWeight = $(this).val();
            if (selectedWeight) {
                $.get("/WeightWise/GetPrice", { weight: selectedWeight }, function (data) {
                    $("#price").val(data);
                    calculateTotal();
                });
            }
        });

        $("#quantity").on("input", function () {
            calculateTotal();
        });

        function calculateTotal() {
            var price = parseFloat($("#price").val()) || 0;
            var quantity = parseInt($("#quantity").val()) || 1;
            var total = price * quantity;
            $("#totalAmount").val(total);
        }
    });
</script>

</body>
</html>
